<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SVG Cubic Curve Path</title>

<style>
body {
  font-family: sans-serif;
  display: flex;
  justify-content: center;
}
svg {
position: flex;
/* margin-left: 50px;*/
/* margin-top: 30px;*/
  background-color: #ffffff;
}
#page-container {
  position:relative;
  border: 1px solid red;
  padding: 0;
  display: inline-block;
  margin-left: auto;
  margin-right: auto;
}

</style>

</head>

<body>

<div id="page-container">
<h1>SVG Cubic Curve Path</h1>
<svg version="1.1" width="800" height="400" viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">

  <g id="grid" fill="none" stroke="black" stroke-width="0.05">
  <path id="vertical-grid" d="M0.1 0 v50 m10 0 v-50 m10 0 v50 m10 0 v-50 m10 0 v50 m10 0 v-50 m10 0 v50 m10 0 v-50 m10 0 v50 m10 0 v-50 m9.8 0 v50"/>
  <path id="horizontal-grid" d="M0 0.1 h100 m0 10 h-100 m0 10 h100 m0 10 h-100 m0 10 h100 m0 9.8 h-100"/>
  </g>

  <g id="axis-labels" font-size="2" fill="black">
    <g id="x-Labels" text-anchor="left">
    <text x="0" y="2">0</text>
    <text x="10" y="2">10</text>
    <text x="20" y="2">20</text>
    <text x="30" y="2">30</text>
    <text x="40" y="2">40</text>
    <text x="50" y="2">50</text>
    <text x="60" y="2">60</text>
    <text x="70" y="2">70</text>
    <text x="80" y="2">80</text>
    <text x="90" y="2">90</text>
    <text x="100" y="2">100</text>
    </g>
    <g id="y-labels" text-anchor="left">
    <text x="0" y="10">10</text>
    <text x="0" y="20">20</text>
    <text x="0" y="30">30</text>
    <text x="0" y="40">40</text>
    <text x="0" y="50">50</text>
    </g>
  </g>
  
  <g id="points" fill="blue" stroke="none" font-size="2">
  <!-- child order critical to function -->
  <path data-node="" d="M10 10 h10" stroke="red" stroke-width="0.2"/>
  <path d="M10 20 20 20" stroke="red" stroke-width="0.2"/>
  <path stroke="green" stroke-width="0.2" d="M10 10 C20 10 20 20 10 20" fill="none"/>
  <circle data-node="0" cx="10" cy="10" r="0.5"/>
  <text x="10" y="9" fill="red" text-anchor="middle">10,10</text>
  <circle data-node="1" cx="20" cy="10" r="0.5"/>
  <text x="20" y="9" fill="red" text-anchor="middle">20,10</text>
  <circle data-node="2" id="handle" cx="20" cy="20" r="0.5"/>
  <text x="20" y="19" fill="red" text-anchor="middle">20, 20</text>
  <circle data-node="3" cx="10" cy="20" r="0.5"/>
  <text x="10" y="19" fill="red" text-anchor="middle">10,20</text>
  <rect x="20" y="47" width="50" height="2.5" fill="white" />
  <text id="definition-report" text-anchor="left" x="20" y="49" fill="green">green path definition: d="M10 10 C20 10 20 20 10 20"</text>
  </g>
</svg>
</div>
<script>

window.onload = function() {
// all functionality wrapped here to fire onload;

let down=false;
const canvas = document.getElementsByTagName('svg')[0]; 
const circles = document.getElementById('points').getElementsByTagName('circle');
const paths = document.getElementById('points').getElementsByTagName('path');
const labels = document.getElementById('points').getElementsByTagName('text');
let nodeNumber = -1;
let lineNumber = -1;
Points = [{x:10, y:10}, {x:20, y:10}, {x:20, y:20}, {x:10, y:20}];

canvas.addEventListener('mousedown', event => {
  if (event.target.tagName == 'circle') {
  nodeNumber = parseInt(event.target.dataset.node);
  lineNumber = (nodeNumber < 2) ? 0 : 1;
  down=true; 
  } // end if circle targetted;
});

canvas.addEventListener('mousemove', event => {
   if (down) {
   canvasLeftBorder = canvas.getBoundingClientRect().left;
   canvasRightBorder = canvas.getBoundingClientRect().top;
   X = (event.clientX-canvasLeftBorder)/8; // - 6;
   Y = (event.clientY-canvasRightBorder)/8; // -3.8;

   Points[nodeNumber] = {x:X, y:Y};

   circles[nodeNumber].setAttribute('cx', `${X}`);
   circles[nodeNumber].setAttribute('cy', `${Y}`)   
   paths[lineNumber].setAttribute('d', lineDefinition(lineNumber) );
   paths[2].setAttribute('d', curveDefinition());
   labels[nodeNumber].outerHTML = `<text x="${X}" y="${Y-1}" text-anchor="middle" fill="red">${parseInt(X)}, ${parseInt(Y)}</text>`; 
   document.getElementById('definition-report').outerHTML = displayDefinition(); 
   }  
});

canvas.addEventListener('mouseup', event => {
down=false;
nodeNumber = -1;
lineNumber = -1; 
});

function lineDefinition (lineNumber) {
return `M${Points[lineNumber*2].x} ${Points[lineNumber*2].y} ${Points[lineNumber*2+1].x} ${Points[lineNumber*2+1].y}`;
}

function curveDefinition () {
   return`M${Points[0].x} ${Points[0].y} C${Points[1].x} ${Points[1].y} ${Points[2].x} ${Points[2].y} ${Points[3].x} ${Points[3].y}`;}

function integerCoordinates () {
   return`M${parseInt(Points[0].x)} ${parseInt(Points[0].y)} C${parseInt(Points[1].x)} ${parseInt(Points[1].y)} ${parseInt(Points[2].x)} ${parseInt(Points[2].y)} ${parseInt(Points[3].x)} ${parseInt(Points[3].y)}`;
}

function displayDefinition() {
return `<text id="definition-report" x="20" y="49" text-anchor="left" fill="green">green path definition: d="${integerCoordinates()}"</text>`;
}

} // end onload function;


</script>

</body>
</html>